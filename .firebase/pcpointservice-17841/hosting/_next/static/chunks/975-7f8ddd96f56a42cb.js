"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[975],{4384:(e,t,r)=>{r.d(t,{useUser:()=>o});var s=r(12115),a=r(59253),n=r(81118);let o=()=>{let e=(0,n.useAuth)(),[t,r]=(0,s.useState)(null),[o,i]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{if(!e)return void i(!1);let t=(0,a.hg)(e,e=>{r(e),i(!1)});return()=>t()},[e]),{user:t,isLoading:o}}},7082:(e,t,r)=>{r.d(t,{g:()=>l});var s=r(95155),a=r(19649),n=r(52619),o=r.n(n),i=r(33931);function l(e){let{className:t}=e;return(0,s.jsxs)(o(),{href:"/",className:(0,i.cn)("flex items-center gap-2",t),prefetch:!1,children:[(0,s.jsx)(a.A,{className:"h-7 w-7 text-primary"}),(0,s.jsx)("span",{className:"text-xl font-bold tracking-tight text-foreground",children:"Pc Point"})]})}},21006:(e,t,r)=>{r.d(t,{cu:()=>d.completeServiceRequest,AU:()=>c,Vl:()=>d.setServiceRequest,cA:()=>d.updateServiceRequestStatus,As:()=>i.useAuth,jt:()=>i.useFirestore,Jd:()=>l.useUser});var s=r(52078),a=r(59253),n=r(19708);let o={apiKey:"AIzaSyBqtFHGJdh8uBkwWvxDBpb2Up4EFNMSS1g",authDomain:"pcpointservice-17841.firebaseapp.com",projectId:"pcpointservice-17841",storageBucket:"pcpointservice-17841.appspot.com",messagingSenderId:"764598181834",appId:"1:764598181834:web:1d3863cf6ab4da02803933",measurementId:"G-P8CV9CH8Z4"};var i=r(81118);r(52835);var l=r(4384),d=r(34673);function c(){let e=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)(o),t=(0,a.xI)(e),r=(0,n.aU)(e);return{app:e,auth:t,firestore:r}}r(68818),r(57180)},33931:(e,t,r)=>{r.d(t,{cn:()=>n});var s=r(2821),a=r(75889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},34673:(e,t,r)=>{r.d(t,{completeServiceRequest:()=>l,setServiceRequest:()=>o,updateServiceRequestStatus:()=>i});var s=r(19708),a=r(76917),n=r(50259);function o(e,t,r){let o=(0,s.H9)((0,s.rJ)(e,"serviceRequests")),i={...r,userId:t,submittedAt:new Date().toISOString(),updatedAt:new Date().toISOString(),status:"Pending",id:o.id},l={...i};return delete l.submittedAt,delete l.updatedAt,l.submittedAt=(0,s.O5)(),l.updatedAt=(0,s.O5)(),r.appointmentDate&&(l.appointmentDate=r.appointmentDate),(0,s.BN)(o,l).catch(async e=>{console.error("Firestore error:",e);let t=new n.$({path:o.path,operation:"create",requestResourceData:i});throw a.d.emit("permission-error",t),t}),i}function i(e,t,r){let o=(0,s.H9)(e,"serviceRequests",t),i={status:r,updatedAt:(0,s.O5)()};return(0,s.mZ)(o,i).catch(async e=>{console.error("Firestore error:",e);let t=new n.$({path:o.path,operation:"update",requestResourceData:i});throw a.d.emit("permission-error",t),t})}function l(e,t,r){let o=(0,s.H9)(e,"serviceRequests",t),i={status:"Completed",cost:r.cost,updatedAt:(0,s.O5)()};return r.invoiceNotes&&(i.invoiceNotes=r.invoiceNotes),(0,s.mZ)(o,i).catch(async e=>{console.error("Firestore error:",e);let t=new n.$({path:o.path,operation:"update",requestResourceData:i});throw a.d.emit("permission-error",t),t})}},50259:(e,t,r)=>{r.d(t,{$:()=>s});class s extends Error{constructor(e){super("FirestoreError: Missing or insufficient permissions: The following request was denied by Firestore Security Rules:\n".concat(JSON.stringify({context:e},null,2))),this.name="FirestorePermissionError",this.context=e}}},52835:(e,t,r)=>{r.d(t,{FirebaseClientProvider:()=>i});var s=r(95155),a=r(81118),n=r(21006);let o=null;function i(e){let{children:t}=e,r=(o||(o=(0,n.AU)()),o);return(0,s.jsx)(a.FirebaseProvider,{value:r,children:t})}},57180:(e,t,r)=>{r.d(t,{useDoc:()=>i});var s=r(12115),a=r(19708),n=r(76917),o=r(50259);let i=e=>{let[t,r]=(0,s.useState)(null),[i,l]=(0,s.useState)(!0),[d,c]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(!e){r(null),l(!1);return}l(!0);let t=(0,a.aQ)(e,e=>{e.exists()?r({...e.data(),id:e.id}):r(null),l(!1),c(null)},t=>{console.error("useDoc Error:",t);let s=new o.$({path:e.path,operation:"get"});n.d.emit("permission-error",s),c(s),r(null),l(!1)});return()=>t()},[e]),{data:t,isLoading:i,error:d}}},57356:(e,t,r)=>{r.d(t,{$:()=>d,r:()=>l});var s=r(95155),a=r(12115),n=r(17129),o=r(83101),i=r(33931);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(l({variant:a,size:o,className:r})),ref:t,...c})});d.displayName="Button"},63660:(e,t,r)=>{r.d(t,{dj:()=>u});var s=r(12115);let a=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=[],l={toasts:[]};function d(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),i.forEach(e=>{e(l)})}function c(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function u(){let[e,t]=s.useState(l);return s.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},68818:(e,t,r)=>{r.d(t,{useCollection:()=>o});var s=r(12115),a=r(19708),n=r(76917);let o=e=>{let[t,r]=(0,s.useState)(null),[o,i]=(0,s.useState)(!0),[l,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(!e){r(null),i(!1);return}i(!0);let t=(0,a.aQ)(e,e=>{r(e.docs.map(e=>({...e.data(),id:e.id}))),i(!1),d(null)},e=>{console.error("useCollection Error:",e),n.d.emit("error",e),d(e),r(null),i(!1)});return()=>t()},[e]),{data:t,isLoading:o,error:l}}},73975:(e,t,r)=>{r.d(t,{Header:()=>E});var s=r(95155),a=r(52619),n=r.n(a),o=r(7082),i=r(57356),l=r(12115),d=r(77283),c=r(83101),u=r(26615),f=r(33931);let h=d.bL,m=d.l9;d.bm;let p=d.ZL,x=l.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(d.hJ,{className:(0,f.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a,ref:t})});x.displayName=d.hJ.displayName;let g=(0,c.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),v=l.forwardRef((e,t)=>{let{side:r="right",className:a,children:n,...o}=e;return(0,s.jsxs)(p,{children:[(0,s.jsx)(x,{}),(0,s.jsxs)(d.UC,{ref:t,className:(0,f.cn)(g({side:r}),a),...o,children:[n,(0,s.jsxs)(d.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});v.displayName=d.UC.displayName;let b=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,f.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};b.displayName="SheetHeader";let j=l.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(d.hE,{ref:t,className:(0,f.cn)("text-lg font-semibold text-foreground",r),...a})});j.displayName=d.hE.displayName,l.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(d.VY,{ref:t,className:(0,f.cn)("text-sm text-muted-foreground",r),...a})}).displayName=d.VY.displayName;var N=r(44622),y=r(98428),S=r(21006),w=r(59253),A=r(20063);function E(){let{user:e,isLoading:t}=(0,S.Jd)(),r=(0,S.As)(),a=(0,A.useRouter)(),l=async()=>{r&&(await (0,w.CI)(r),a.push("/"))},d=e?[{href:"/",label:"Home"},{href:"/dashboard",label:"My Dashboard"},{href:"/request",label:"New Request"}]:[{href:"/",label:"Home"},{href:"/request",label:"New Request"}],c="/login",u="Admin Login";return(0,s.jsx)("header",{className:"sticky top-0 z-50 w-full border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,s.jsxs)("div",{className:"container flex h-14 max-w-screen-2xl items-center",children:[(0,s.jsx)("div",{className:"mr-4 hidden md:flex",children:(0,s.jsx)(o.g,{className:"mr-6"})}),(0,s.jsxs)("div",{className:"flex flex-1 items-center justify-between space-x-2 md:justify-end",children:[(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsxs)(h,{children:[(0,s.jsx)(m,{asChild:!0,children:(0,s.jsxs)(i.$,{variant:"ghost",size:"icon",children:[(0,s.jsx)(N.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle Menu"})]})}),(0,s.jsxs)(v,{side:"left",className:"pr-0",children:[(0,s.jsx)(b,{children:(0,s.jsx)(j,{className:"sr-only",children:"Main Menu"})}),(0,s.jsx)(o.g,{className:"mb-6"}),(0,s.jsxs)("nav",{className:"flex flex-col space-y-4",children:[d.map(e=>(0,s.jsx)(n(),{href:e.href,className:"text-foreground/70 transition-colors hover:text-foreground",children:e.label},e.href)),(0,s.jsx)("hr",{className:"my-2"}),e?(0,s.jsx)(i.$,{variant:"ghost",onClick:l,className:"justify-start text-foreground/70",children:"Logout"}):(0,s.jsxs)(s.Fragment,{children:[[{href:"/customer-login",label:"Customer Login"},{href:"/signup",label:"Sign Up"}].map(e=>(0,s.jsx)(n(),{href:e.href,className:"text-foreground/70 transition-colors hover:text-foreground",children:e.label},e.href)),(0,s.jsx)("hr",{className:"my-2"}),(0,s.jsx)(n(),{href:c,className:"text-foreground/70 transition-colors hover:text-foreground",children:u},c)]})]})]})]})}),(0,s.jsx)("nav",{className:"hidden md:flex md:items-center md:gap-4 lg:gap-6",children:d.map(e=>(0,s.jsx)(n(),{href:e.href,className:"text-sm font-medium text-foreground/70 transition-colors hover:text-foreground",children:e.label},e.href))}),(0,s.jsx)("div",{className:"hidden md:flex items-center gap-2",children:!t&&e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-muted-foreground",children:["Hi, ",e.displayName||e.email]}),(0,s.jsx)(i.$,{variant:"ghost",size:"icon",onClick:l,"aria-label":"Logout",children:(0,s.jsx)(y.A,{className:"h-5 w-5"})})]}):t?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.$,{asChild:!0,variant:"ghost",children:(0,s.jsx)(n(),{href:"/customer-login",children:"Login"})}),(0,s.jsx)(i.$,{asChild:!0,children:(0,s.jsx)(n(),{href:"/signup",children:"Sign Up"})}),(0,s.jsx)("div",{className:"h-6 w-px bg-border mx-2"}),(0,s.jsx)(i.$,{asChild:!0,variant:"outline",children:(0,s.jsx)(n(),{href:c,children:u})})]})})]})]})})}},76917:(e,t,r)=>{r.d(t,{d:()=>a});class s{on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}emit(e){for(var t=arguments.length,r=Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];let a=this.events[e];a&&a.forEach(e=>e(...r))}off(e,t){let r=this.events[e];r&&(this.events[e]=r.filter(e=>e!==t))}constructor(){this.events={}}}let a=new s},81118:(e,t,r)=>{r.d(t,{FirebaseProvider:()=>c,useAuth:()=>h,useFirebase:()=>u,useFirebaseApp:()=>f,useFirestore:()=>m});var s=r(95155),a=r(12115),n=r(76917),o=r(63660),i=r(50259);function l(){let{toast:e}=(0,o.dj)();return(0,a.useEffect)(()=>{let t=t=>{console.error(t),t instanceof i.$?e({variant:"destructive",title:"Permission Denied",description:"You don't have permission to perform this action. Check Firestore rules."}):e({variant:"destructive",title:"An Error Occurred",description:t.message||"An unexpected error occurred."})};return n.d.on("permission-error",t),n.d.on("error",t),()=>{n.d.off("permission-error",t),n.d.off("error",t)}},[e]),null}let d=(0,a.createContext)(null);function c(e){let{children:t,value:r}=e,n=(0,a.useMemo)(()=>r,[r.app,r.auth,r.firestore]);return(0,s.jsxs)(d.Provider,{value:n,children:[t,(0,s.jsx)(l,{})]})}let u=()=>{let e=(0,a.useContext)(d);if(!e)throw Error("useFirebase must be used within a FirebaseProvider");return e},f=()=>u().app,h=()=>u().auth,m=()=>u().firestore}}]);