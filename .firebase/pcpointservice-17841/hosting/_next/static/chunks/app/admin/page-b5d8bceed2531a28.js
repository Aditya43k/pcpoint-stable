(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1098:(e,s,t)=>{"use strict";t.d(s,{w:()=>c});var a=t(95155),r=t(7082),l=t(10639),n=t(52619),d=t.n(n);let i=e=>(0,a.jsx)("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z",fill:"currentColor"})});function c(){return(0,a.jsx)("footer",{className:"border-t bg-card",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-between gap-6 md:flex-row",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center md:items-start md:text-left",children:[(0,a.jsx)(r.g,{}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["\xa9 ",new Date().getFullYear()," Pc Point. All rights reserved."]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(d(),{href:"#","aria-label":"WhatsApp",children:(0,a.jsx)(i,{className:"h-6 w-6 text-muted-foreground transition-colors hover:text-foreground"})}),(0,a.jsx)(d(),{href:"https://maps.app.goo.gl/mp6S319hKZDz36Qr8","aria-label":"Google Maps",target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(l.A,{className:"h-6 w-6 text-muted-foreground transition-colors hover:text-foreground"})})]})]})})})}},11121:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var a=t(95155),r=t(33931);function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",s),...t})}},34516:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var a=t(95155),r=t(12115),l=t(33931);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});n.displayName="Input"},36942:(e,s,t)=>{"use strict";t.d(s,{J:()=>c});var a=t(95155),r=t(12115),l=t(10489),n=t(83101),d=t(33931);let i=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.b,{ref:s,className:(0,d.cn)(i(),t),...r})});c.displayName=l.b.displayName},40764:(e,s,t)=>{Promise.resolve().then(t.bind(t,42505))},42505:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eI});var a=t(95155),r=t(12115),l=t(20063),n=t(73975),d=t(1098),i=t(21006),c=t(68818),o=t(19708),m=t(90758),x=t(99812),u=t(45781),f=t(33931),h=t(57268);let p=r.forwardRef((e,s)=>{let{className:t,orientation:r="horizontal",decorative:l=!0,...n}=e;return(0,a.jsx)(h.b,{ref:s,decorative:l,orientation:r,className:(0,f.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...n})});p.displayName=h.b.displayName;var j=t(43737),g=t(8861),N=t(76251),b=t(56639),v=t(50817),w=t(92033),y=t(18527),C=t(28068),R=t(44575),A=t(748),k=t(93169),P=t(47034),I=t(98039),D=t(5225),F=t(27314),S=t(47974),T=t(18155),E=t(74421),q=t(59729),z=t(19201),B=t(27500),Z=t(78770),L=t(64511),M=t(57356),V=t(63660),H=t(78830),J=t(6463);let $=J.bL,_=J.l9,Y=J.ZL,O=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(J.hJ,{className:(0,f.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:s})});O.displayName=J.hJ.displayName;let U=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsxs)(Y,{children:[(0,a.jsx)(O,{}),(0,a.jsx)(J.UC,{ref:s,className:(0,f.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r})]})});U.displayName=J.UC.displayName;let W=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,f.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};W.displayName="AlertDialogHeader";let X=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,f.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};X.displayName="AlertDialogFooter";let G=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(J.hE,{ref:s,className:(0,f.cn)("text-lg font-semibold",t),...r})});G.displayName=J.hE.displayName;let K=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(J.VY,{ref:s,className:(0,f.cn)("text-sm text-muted-foreground",t),...r})});K.displayName=J.VY.displayName;let Q=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(J.rc,{ref:s,className:(0,f.cn)((0,M.r)(),t),...r})});Q.displayName=J.rc.displayName;let ee=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(J.ZD,{ref:s,className:(0,f.cn)((0,M.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...r})});ee.displayName=J.ZD.displayName;var es=t(77283),et=t(26615);let ea=es.bL,er=es.l9,el=es.ZL;es.bm;let en=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(es.hJ,{ref:s,className:(0,f.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});en.displayName=es.hJ.displayName;let ed=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(el,{children:[(0,a.jsx)(en,{}),(0,a.jsxs)(es.UC,{ref:s,className:(0,f.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[r,(0,a.jsxs)(es.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(et.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});ed.displayName=es.UC.displayName;let ei=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,f.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};ei.displayName="DialogHeader";let ec=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,f.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};ec.displayName="DialogFooter";let eo=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(es.hE,{ref:s,className:(0,f.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});eo.displayName=es.hE.displayName;let em=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(es.VY,{ref:s,className:(0,f.cn)("text-sm text-muted-foreground",t),...r})});em.displayName=es.VY.displayName;var ex=t(22544),eu=t(66942),ef=t(15653),eh=t(63342),ep=t(34516),ej=t(90202);let eg={Laptop:(0,a.jsx)(j.A,{className:"h-5 w-5 text-muted-foreground"}),Desktop:(0,a.jsx)(g.A,{className:"h-5 w-5 text-muted-foreground"}),Printer:(0,a.jsx)(N.A,{className:"h-5 w-5 text-muted-foreground"}),Software:(0,a.jsx)(b.A,{className:"h-5 w-5 text-muted-foreground"})},eN=ef.Ik({cost:ef.vk(e=>parseFloat(ef.Yj().parse(e)),ef.ai().positive({message:"Cost must be a positive number."})),invoiceNotes:ef.Yj().optional()});function eb(e){let{request:s}=e,t=(0,i.jt)(),{toast:l}=(0,V.dj)(),[n,d]=(0,r.useState)(null),[c,o]=(0,r.useState)(!1),x=(0,ex.mN)({resolver:(0,eu.u)(eN),defaultValues:{cost:0,invoiceNotes:""}}),h="Software"===s.deviceType&&"Anti-virus & Security"===s.brand,j=async e=>{if(t){d(e);try{await (0,i.cA)(t,s.id,e),l({title:"Request Updated",description:'Request status changed to "'.concat(e,'".')})}catch(e){l({variant:"destructive",title:"Update Failed",description:"Could not update the request status. Please try again."})}finally{d(null)}}},g=async e=>{if(t){d("Completed");try{await (0,i.cu)(t,s.id,{cost:e.cost,invoiceNotes:e.invoiceNotes}),l({title:"Request Completed",description:"Request has been marked as completed and billed."}),o(!1),x.reset()}catch(e){l({variant:"destructive",title:"Update Failed",description:"Could not complete the request. Please try again."})}finally{d(null)}}};return(0,a.jsxs)(m.Zp,{className:"shadow-md",children:[(0,a.jsx)(m.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(m.ZB,{className:"font-headline text-2xl",children:["Request ",s.id.substring(0,8)]}),(0,a.jsxs)(m.BT,{children:["Submitted on ",(0,L.GP)(s.submittedAt.toDate(),"PPP")]})]}),(0,a.jsxs)(u.E,{className:"flex items-center gap-2",variant:"outline",children:[(0,a.jsx)("span",{className:(0,f.cn)("h-2 w-2 rounded-full",(e=>{switch(e){case"Pending":return"bg-yellow-500";case"In Progress":return"bg-blue-500";case"Completed":case"Scheduled":return"bg-green-500";case"Paid":return"bg-purple-500";case"Cancelled":case"Declined":return"bg-red-500";case"Awaiting Parts":return"bg-orange-500";default:return"bg-gray-500"}})(s.status))}),s.status]})]})}),(0,a.jsxs)(m.Wu,{className:"grid gap-6",children:[s.appointmentDate&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Booking Request"}),(0,a.jsxs)(H.Fc,{children:[(0,a.jsx)(v.A,{className:"h-4 w-4"}),(0,a.jsxs)(H.XL,{children:["Requested Appointment: ",(0,L.GP)(s.appointmentDate.toDate(),"PPP")]}),"Pending"===s.status&&(0,a.jsxs)(H.TN,{className:"mt-4 flex gap-2",children:[(0,a.jsxs)(M.$,{size:"sm",onClick:()=>j("Scheduled"),disabled:!!n,children:["Scheduled"===n?(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Accept"]}),(0,a.jsxs)(M.$,{size:"sm",variant:"destructive",onClick:()=>j("Declined"),disabled:!!n,children:["Declined"===n?(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Decline"]})]}),("Scheduled"===s.status||"Declined"===s.status)&&(0,a.jsxs)(H.TN,{className:"mt-2 text-sm",children:["This booking request has been ",(0,a.jsx)("span",{className:"font-semibold",children:s.status.toLowerCase()}),"."]})]})]}),(0,a.jsx)(p,{})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-4",children:"Manage Request Status"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(M.$,{size:"sm",onClick:()=>j("In Progress"),disabled:!!n||["In Progress","Completed","Cancelled","Paid"].includes(s.status),children:["In Progress"===n?(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(R.A,{className:"mr-2 h-4 w-4"}),"In Progress"]}),(0,a.jsxs)(ea,{open:c,onOpenChange:o,children:[(0,a.jsx)(er,{asChild:!0,children:(0,a.jsxs)(M.$,{size:"sm",disabled:!!n||["Completed","Cancelled","Paid"].includes(s.status),className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,a.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Completed"]})}),(0,a.jsxs)(ed,{children:[(0,a.jsxs)(ei,{children:[(0,a.jsx)(eo,{children:"Complete Service & Generate Bill"}),(0,a.jsxs)(em,{children:["Enter the final cost and any billing notes for request ",s.id.substring(0,8),"."]})]}),(0,a.jsx)(eh.lV,{...x,children:(0,a.jsxs)("form",{onSubmit:x.handleSubmit(g),className:"space-y-4 py-4",children:[(0,a.jsx)(eh.zB,{control:x.control,name:"cost",render:e=>{let{field:s}=e;return(0,a.jsxs)(eh.eI,{children:[(0,a.jsx)(eh.lR,{children:"Final Cost (₹)"}),(0,a.jsx)(eh.MJ,{children:(0,a.jsx)(ep.p,{type:"number",step:"0.01",placeholder:"1500.00",...s})}),(0,a.jsx)(eh.C5,{})]})}}),(0,a.jsx)(eh.zB,{control:x.control,name:"invoiceNotes",render:e=>{let{field:s}=e;return(0,a.jsxs)(eh.eI,{children:[(0,a.jsx)(eh.lR,{children:"Billing Notes (Optional)"}),(0,a.jsx)(eh.MJ,{children:(0,a.jsx)(ej.T,{placeholder:"e.g., Replaced SSD, installed new OS.",...s})}),(0,a.jsx)(eh.C5,{})]})}}),(0,a.jsx)(ec,{children:(0,a.jsxs)(M.$,{type:"submit",disabled:"Completed"===n,children:["Completed"===n?(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Mark as Completed & Bill"]})})]})})]})]}),"Completed"===s.status&&(0,a.jsxs)($,{children:[(0,a.jsx)(_,{asChild:!0,children:(0,a.jsxs)(M.$,{size:"sm",className:"bg-purple-600 hover:bg-purple-700 text-white",disabled:!!n,children:[(0,a.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Confirm Payment"]})}),(0,a.jsxs)(U,{children:[(0,a.jsxs)(W,{children:[(0,a.jsx)(G,{children:"Confirm Payment Received?"}),(0,a.jsx)(K,{children:"This action marks the request as paid and cannot be undone."})]}),(0,a.jsxs)(X,{children:[(0,a.jsx)(ee,{children:"Cancel"}),(0,a.jsxs)(Q,{onClick:()=>j("Paid"),disabled:!!n,children:["Paid"===n?(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Yes, Confirm"]})]})]})]}),(0,a.jsxs)(M.$,{size:"sm",variant:"destructive",onClick:()=>j("Cancelled"),disabled:!!n||["Completed","Cancelled","Paid"].includes(s.status),children:["Cancelled"===n?(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(P.A,{className:"mr-2 h-4 w-4"}),"Cancel"]})]})]}),(0,a.jsx)(p,{}),("Completed"===s.status||"Paid"===s.status)&&null!=s.cost&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-4",children:"Billing Details"}),(0,a.jsxs)("div",{className:"space-y-4 rounded-md border p-4 bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(I.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-semibold",children:"Total Cost:"}),(0,a.jsxs)("span",{children:["₹",s.cost.toFixed(2)]})]}),s.invoiceNotes&&(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(D.A,{className:"h-5 w-5 text-muted-foreground mt-1 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-sm",children:s.invoiceNotes})]}),"Paid"===s.status&&(0,a.jsxs)("div",{className:"flex items-center gap-3 pt-2 text-green-600",children:[(0,a.jsx)(y.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold",children:"Payment Confirmed"})]})]})]}),(0,a.jsx)(p,{})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Customer Information"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(F.A,{className:"h-5 w-5 text-muted-foreground"})," ",(0,a.jsx)("span",{children:s.customerName})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(S.A,{className:"h-5 w-5 text-muted-foreground"})," ",(0,a.jsx)("span",{children:s.customerEmail})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Device/Service Information"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[eg[s.deviceType]||(0,a.jsx)(T.A,{className:"h-5 w-5 text-muted-foreground"})," ",(0,a.jsx)("span",{children:s.deviceType})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:["Software"===s.deviceType?(0,a.jsx)(E.A,{className:"h-5 w-5 text-muted-foreground"}):(0,a.jsx)(q.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)("span",{children:s.brand})]}),h?(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(z.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)("span",{children:s.osVersion})]}):(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"font-mono text-xs bg-muted p-1 rounded",children:"OS"}),(0,a.jsx)("span",{children:s.osVersion})]})]})]}),(0,a.jsx)(p,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Issue Details"}),(0,a.jsxs)("div",{className:"space-y-4 rounded-md border p-4 bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(B.A,{className:"h-5 w-5 text-muted-foreground mt-1 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-sm",children:s.issueDescription})]}),s.errorMessages&&(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(Z.A,{className:"h-5 w-5 text-destructive mt-1 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-sm font-mono bg-destructive/10 p-2 rounded",children:s.errorMessages})]})]})]})]})]})}var ev=t(11121),ew=t(83104);function ey(){let e=(0,i.jt)(),[s,t]=(0,r.useState)(null),l=(0,r.useMemo)(()=>e?(0,o.P)((0,o.rJ)(e,"serviceRequests"),(0,o.My)("submittedAt","desc")):null,[e]),{data:n,isLoading:d,error:h}=(0,c.useCollection)(l);(0,r.useEffect)(()=>{!d&&n&&n.length>0&&!s&&t(n[0].id)},[n,d,s]);let p=(0,r.useMemo)(()=>null==n?void 0:n.find(e=>e.id===s),[n,s]);return d?(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(m.Zp,{className:"lg:col-span-1 h-fit",children:[(0,a.jsx)(m.aR,{children:(0,a.jsx)(m.ZB,{className:"font-headline",children:"Incoming Requests"})}),(0,a.jsx)(m.Wu,{className:"p-0",children:(0,a.jsxs)("div",{className:"p-4 space-y-2",children:[(0,a.jsx)(ev.E,{className:"h-10 w-full"}),(0,a.jsx)(ev.E,{className:"h-10 w-full"}),(0,a.jsx)(ev.E,{className:"h-10 w-full"})]})})]}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(m.Zp,{className:"flex h-full min-h-[300px] items-center justify-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading requests..."})})})]}):h?(0,a.jsxs)(H.Fc,{variant:"destructive",children:[(0,a.jsx)(ew.A,{className:"h-4 w-4"}),(0,a.jsx)(H.XL,{children:"Error fetching data"}),(0,a.jsx)(H.TN,{children:"There was a problem loading service requests from the database. Please try again later."})]}):n&&0!==n.length?(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(m.Zp,{className:"lg:col-span-1 h-fit",children:[(0,a.jsx)(m.aR,{children:(0,a.jsx)(m.ZB,{className:"font-headline",children:"Incoming Requests"})}),(0,a.jsx)(m.Wu,{className:"p-0",children:(0,a.jsxs)(x.XI,{children:[(0,a.jsx)(x.A0,{children:(0,a.jsxs)(x.Hj,{children:[(0,a.jsx)(x.nd,{children:"ID"}),(0,a.jsx)(x.nd,{children:"Status"})]})}),(0,a.jsx)(x.BF,{children:n.map(e=>(0,a.jsxs)(x.Hj,{onClick:()=>t(e.id),className:(0,f.cn)("cursor-pointer",s===e.id&&"bg-muted/80"),children:[(0,a.jsx)(x.nA,{className:"font-medium",children:e.id.substring(0,8)}),(0,a.jsx)(x.nA,{children:(0,a.jsx)(u.E,{variant:(e=>{switch(e){case"Pending":case"Awaiting Parts":default:return"default";case"In Progress":return"secondary";case"Completed":case"Paid":return"outline";case"Cancelled":return"destructive"}})(e.status),children:e.status})})]},e.id))})]})})]}),(0,a.jsx)("div",{className:"lg:col-span-2",children:p?(0,a.jsx)(eb,{request:p},p.id):(0,a.jsx)(m.Zp,{className:"flex h-full min-h-[300px] items-center justify-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Select a request to view details"})})})]}):(0,a.jsxs)(m.Zp,{children:[(0,a.jsx)(m.aR,{children:(0,a.jsx)(m.ZB,{className:"font-headline",children:"Incoming Requests"})}),(0,a.jsx)(m.Wu,{children:(0,a.jsx)("p",{className:"p-8 text-center text-muted-foreground",children:"No service requests found."})})]})}var eC=t(52619),eR=t.n(eC),eA=t(59915),ek=t(9288),eP=t(98428);function eI(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{"true"!==sessionStorage.getItem("isAdminLoggedIn")?e.push("/login"):t(!1)},[e]),s)?(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(n.Header,{}),(0,a.jsxs)("main",{className:"flex-grow container mx-auto px-4 py-8 sm:py-12 space-y-8",children:[(0,a.jsx)(ev.E,{className:"h-10 w-1/3"}),(0,a.jsx)(ev.E,{className:"h-48 w-full"}),(0,a.jsx)(ev.E,{className:"h-10 w-1/4"}),(0,a.jsx)(ev.E,{className:"h-64 w-full"})]}),(0,a.jsx)(d.w,{})]}):(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(n.Header,{}),(0,a.jsxs)("main",{className:"flex-grow container mx-auto px-4 py-6 sm:py-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight font-headline",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage incoming service requests."})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[(0,a.jsx)(M.$,{asChild:!0,size:"lg",variant:"outline",children:(0,a.jsxs)(eR(),{href:"/admin/records",children:[(0,a.jsx)(eA.A,{className:"mr-2 h-5 w-5"}),"View Records"]})}),(0,a.jsx)(M.$,{asChild:!0,size:"lg",className:"bg-accent text-accent-foreground hover:bg-accent/90",children:(0,a.jsxs)(eR(),{href:"/admin/revenue",children:[(0,a.jsx)(ek.A,{className:"mr-2 h-5 w-5"}),"View Revenue"]})}),(0,a.jsxs)(M.$,{onClick:()=>{sessionStorage.removeItem("isAdminLoggedIn"),e.push("/login")},size:"lg",variant:"outline",children:[(0,a.jsx)(eP.A,{className:"mr-2 h-5 w-5"}),"Logout"]})]})]}),(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsx)(ey,{})})]}),(0,a.jsx)(d.w,{})]})}},45781:(e,s,t)=>{"use strict";t.d(s,{E:()=>d});var a=t(95155);t(12115);var r=t(83101),l=t(33931);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)(n({variant:t}),s),...r})}},63342:(e,s,t)=>{"use strict";t.d(s,{C5:()=>g,MJ:()=>p,Rr:()=>j,eI:()=>f,lR:()=>h,lV:()=>c,zB:()=>m});var a=t(95155),r=t(12115),l=t(17129),n=t(22544),d=t(33931),i=t(36942);let c=n.Op,o=r.createContext({}),m=e=>{let{...s}=e;return(0,a.jsx)(o.Provider,{value:{name:s.name},children:(0,a.jsx)(n.xI,{...s})})},x=()=>{let e=r.useContext(o),s=r.useContext(u),{getFieldState:t,formState:a}=(0,n.xW)(),l=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:d}=s;return{id:d,name:e.name,formItemId:"".concat(d,"-form-item"),formDescriptionId:"".concat(d,"-form-item-description"),formMessageId:"".concat(d,"-form-item-message"),...l}},u=r.createContext({}),f=r.forwardRef((e,s)=>{let{className:t,...l}=e,n=r.useId();return(0,a.jsx)(u.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:s,className:(0,d.cn)("space-y-2",t),...l})})});f.displayName="FormItem";let h=r.forwardRef((e,s)=>{let{className:t,...r}=e,{error:l,formItemId:n}=x();return(0,a.jsx)(i.J,{ref:s,className:(0,d.cn)(l&&"text-destructive",t),htmlFor:n,...r})});h.displayName="FormLabel";let p=r.forwardRef((e,s)=>{let{...t}=e,{error:r,formItemId:n,formDescriptionId:d,formMessageId:i}=x();return(0,a.jsx)(l.DX,{ref:s,id:n,"aria-describedby":r?"".concat(d," ").concat(i):"".concat(d),"aria-invalid":!!r,...t})});p.displayName="FormControl";let j=r.forwardRef((e,s)=>{let{className:t,...r}=e,{formDescriptionId:l}=x();return(0,a.jsx)("p",{ref:s,id:l,className:(0,d.cn)("text-sm text-muted-foreground",t),...r})});j.displayName="FormDescription";let g=r.forwardRef((e,s)=>{var t;let{className:r,children:l,...n}=e,{error:i,formMessageId:c}=x(),o=i?String(null!=(t=null==i?void 0:i.message)?t:""):l;return o?(0,a.jsx)("p",{ref:s,id:c,className:(0,d.cn)("text-sm font-medium text-destructive",r),...n,children:o}):null});g.displayName="FormMessage"},78830:(e,s,t)=>{"use strict";t.d(s,{Fc:()=>i,TN:()=>o,XL:()=>c});var a=t(95155),r=t(12115),l=t(83101),n=t(33931);let d=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=r.forwardRef((e,s)=>{let{className:t,variant:r,...l}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(d({variant:r}),t),...l})});i.displayName="Alert";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",t),...r})});c.displayName="AlertTitle";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",t),...r})});o.displayName="AlertDescription"},90202:(e,s,t)=>{"use strict";t.d(s,{T:()=>n});var a=t(95155),r=t(12115),l=t(33931);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});n.displayName="Textarea"},90758:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>i,Zp:()=>n,aR:()=>d,wL:()=>m});var a=t(95155),r=t(12115),l=t(33931);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});n.displayName="Card";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...r})});d.displayName="CardHeader";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});i.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...r})});m.displayName="CardFooter"},99812:(e,s,t)=>{"use strict";t.d(s,{A0:()=>d,BF:()=>i,Hj:()=>c,XI:()=>n,nA:()=>m,nd:()=>o});var a=t(95155),r=t(12115),l=t(33931);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",t),...r})})});n.displayName="Table";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",t),...r})});d.displayName="TableHeader";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",t),...r})});i.displayName="TableBody",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})}).displayName="TableFooter";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});c.displayName="TableRow";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("th",{ref:s,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r})});o.displayName="TableHead";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("td",{ref:s,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r})});m.displayName="TableCell",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",t),...r})}).displayName="TableCaption"}},e=>{e.O(0,[992,644,873,288,837,500,615,975,441,255,358],()=>e(e.s=40764)),_N_E=e.O()}]);